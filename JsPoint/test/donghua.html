<!DOCTYPE html><html><head>    <meta charset="utf-8">    <title>requestAnimationFrame API</title>    <style>        .div_rotate{width: 200px;height: 200px;border:1px solid #ddd;display: flex;align-items: center;justify-content: center;border-radius: 5px;background-color: #ddd;position: relative;user-select: none;float: left;}        .div_rotate2{width: 400px;height: 400px;border:1px solid #ddd;display: flex;align-items: center;justify-content: center;border-radius: 50%;background-color: #ddd;margin-left: 100px;user-select: none;float: left;background: url(imgs/award2.png) no-repeat center;background-size: 100% 100%;}        @-webkit-keyframes move{            /*20%{margin-left: 100px;width: 100px;height: 200px;}            50%{height: 300px;width: 100px;}            100%{background-color: #bbb;}*/            from {transform: rotate(0deg);}            to {transform: rotate(360deg);}        }        @keyframes move{            from {transform: rotate(0deg);}            to {transform: rotate(360deg);}        }    </style></head><body><div class="div_rotate">hhh</div><div class="div_rotate2"></div><script type="text/javascript">  var util = {    addListener: function(ele,type,handle){      if(ele.addEventListener){        ele.addEventListener(type,handle);      }      else if(ele.attachEvent){        ele.attachEvent('on'+type,handle);      }      else{        ele['on'+type] = handle;      }    },    removeListener: function(ele,type,handle){      if(ele.removeListener){        ele.removeListener(type,handle);      }      else if(ele.detachEvent){        ele.detachEvent('on'+type,handle);      }      else{        ele['on'+type] = null;      }    }  }  var div_rotate = document.querySelector('.div_rotate');  util.addListener(div_rotate,'click',rotate);  /** 借助css3实现动画轮转 **/  function rotate(e){    e = e || window.event;    var target = e.target || e.srcElement;    if(target.style.animation){      target.style.animation = '';      target.style['-webkit-animation'] = '';    }    else{      target.style.animation = 'move .1s infinite';      target.style['-webkit-animation'] = 'move .1s infinite';    }  }  var div_rotate2 = document.querySelector('.div_rotate2');  var animationId = null,intervalId = null;  util.addListener(div_rotate2,'click',ctrlRotate)  function rotate2(){    var target = div_rotate2;    var deg = target.style.transform;    if(deg){      deg = deg.match(/rotate\((\d*)deg/)[1];      deg = parseInt(deg)+15;    }    else{      deg = 15;    }    target.style.transform = 'rotate(' + deg + 'deg)';    /** 调用requestAnimationFrame api实现轮转动画，性能更好 **/    if(window.requestAnimationFrame){      if(animationId)window.cancelAnimationFrame(animationId)      animationId = window.requestAnimationFrame(rotate2)    }  }  function ctrlRotate(){    /** 借用interval实现动画轮转 **/    // if(intervalId){    // 	clearInterval(intervalId);    // 	intervalId = null;    // }    // else{    // 	intervalId = setInterval(function(){    // 		rotate2();    // 	},16)    // }    /** 借助requestAnimationFrame **/    if(animationId){      window.cancelAnimationFrame(animationId);      animationId = null;    }    else{      rotate2();    }  }  ctrlRotate()</script></body></html>