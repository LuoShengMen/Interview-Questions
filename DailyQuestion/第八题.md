### 第 8 题：setTimeout、Promise、Async/Await 的区别

答案：

setTimeout方法用于在指定的毫秒数后调用函数或计算表达式。
- 由于js是单线程，js将所有任务分成两种，一种是同步任务（synchronous），另一种是异步任务（asynchronous）。
* 同步任务指的是，在主线程上排队执行的任务，只有前一个任务执行完毕，才能执行后一个任务；
* 异步任务指的是，不进入主线程、而进入"任务队列"（task queue）的任务，只有"任务队列"通知主线程，某个异步任务可以执行了，该任务才会进入主线程执行。
* 在所有同步任务执行完之前，任何的异步任务是不会执行的
- 异步执行的运行机制如下：
* 1.所有同步任务都在主线程上执行，形成一个执行栈（execution context stack）。
* 2.主线程之外，还存在一个"任务队列"（task queue）。只要异步任务有了运行结果，就在"任务队列"之中放置一个事件。
* 3.一旦"执行栈"中的所有同步任务执行完毕，系统就会读取"任务队列"，看看里面有哪些事件。那些对应的异步任务，于是结束等待状态，进入执行栈，开始执行。
* 4.主线程不断重复上面的第三步。
- 主线程从"任务队列"中读取事件，这个过程是循环不断的，所以整个的这种运行机制又称为Event Loop（事件循环）只要主线程空了，就会去读取"任务队列"，这就是JavaScript的运行机制

一般来说，有以下四种会放入异步任务队列：
setTimeout和setlnterval
DOM事件
ES6中的Promise
Ajax异步请求

setTimeout它会开启一个定时器线程，并不会影响后续的代码执行，这个定时器线程会在事件队列后面添加一个任务，
当js线程在主线程执行其他线程代码完毕后，就会取出事件队列中的事件进行执行，
2.定时器中的this存在隐式丢失的情况
```
var a = 0;
function foo(){
    console.log(this.a);
};
var obj = {
    a : 2,
    foo:foo
}
setTimeout(obj.foo,100);//0
```
若想获得obj对象中的a属性值，可以将obj.foo函数放置在定时器中的匿名函数中进行隐式绑定
```
var a = 0;
function foo(){
    console.log(this.a);
};
var obj = {
    a : 2,
    foo:foo
}
setTimeout(function(){
    obj.foo();
},100);//2
```
或者使用bind方法将foo()方法的this绑定到obj上,call,apply方法均可
```
var a = 0;
function foo(){
    console.log(this.a);
};
var obj = {
    a : 2,
    foo:foo
}
setTimeout(obj.foo.bind(obj),100);//2
```
